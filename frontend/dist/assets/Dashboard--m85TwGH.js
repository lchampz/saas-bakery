import{c as we,a as _,r as c,b as ie,j as e,B as X,R as Pe,T as ke,A as Ie,t as Ce,L as Ee}from"./index-B_Tr2Gx0.js";import{D as Se,T}from"./trending-up-DF3y4D5T.js";import{c as G,s as $,a as ne,b as le,d as Le,e as Y,g as De,i as oe,f as H,h as Re,r as ce,u as de,R as Oe,S as Be,j as Me,k as Te,l as qe,G as Ke,m as me,n as We,o as _e,p as Fe,q as ze,t as Ve,v as ue,w as xe,L as B,x as Ge,A as U,y as J,z as Q,B as R,C as $e,J as Xe,D,E as Ye,F as He,H as Ue,I as Je,K as he,M as F,N as K,O as Qe,P as Ze,Q as ea,T as aa,U as z,V as Z,X as ee,Y as q,W as V,Z as ae,_ as ta,$ as sa,a0 as te,a1 as ra,a2 as ia,a3 as na}from"./PieChart-CFxRMsFP.js";import{P as la}from"./package-BruOrXoJ.js";const oa=t=>({stock:[],capability:[],history:[],loading:!1,error:null,async fetchStock(){var a,s;t({loading:!0});try{const{data:r}=await _.get("/reports/stock");t({stock:r,loading:!1})}catch(r){const i=r;t({error:((s=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:s.message)??"Failed to fetch stock",loading:!1})}},async fetchCapability(){var a,s;t({loading:!0});try{const{data:r}=await _.get("/reports/capability");t({capability:r,loading:!1})}catch(r){const i=r;t({error:((s=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:s.message)??"Failed to fetch capability",loading:!1})}},async fetchHistory(){var a,s;t({loading:!0});try{const{data:r}=await _.get("/reports/history");t({history:r,loading:!1})}catch(r){const i=r;t({error:((s=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:s.message)??"Failed to fetch history",loading:!1})}}}),ca=we(oa);var pe=(t,a,s,r)=>ne(t,"xAxis",a,r),ge=(t,a,s,r)=>le(t,"xAxis",a,r),fe=(t,a,s,r)=>ne(t,"yAxis",s,r),ve=(t,a,s,r)=>le(t,"yAxis",s,r),da=G([$,pe,fe,ge,ve],(t,a,s,r,i)=>oe(t,"xAxis")?H(a,r,!1):H(s,i,!1)),ma=(t,a,s,r,i)=>i,ye=G([Re,ma],(t,a)=>t.filter(s=>s.type==="area").find(s=>s.id===a)),ua=(t,a,s,r,i)=>{var n,m=ye(t,a,s,r,i);if(m!=null){var d=$(t),l=oe(d,"xAxis"),u;if(l?u=Y(t,"yAxis",s,r):u=Y(t,"xAxis",a,r),u!=null){var{stackId:v}=m,y=De(m);if(!(v==null||y==null)){var p=(n=u[v])===null||n===void 0?void 0:n.stackedData;return p==null?void 0:p.find(x=>x.key===y)}}}},xa=G([$,pe,fe,ge,ve,ua,Le,da,ye],(t,a,s,r,i,n,m,d,l)=>{var{chartData:u,dataStartIndex:v,dataEndIndex:y}=m;if(!(l==null||t!=="horizontal"&&t!=="vertical"||a==null||s==null||r==null||i==null||r.length===0||i.length===0||d==null)){var{data:p}=l,x;if(p&&p.length>0?x=p:x=u==null?void 0:u.slice(v,y+1),x!=null){var o=void 0;return Oa({layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataStartIndex:v,areaSettings:l,stackedData:n,displayedData:x,chartBaseValue:o,bandSize:d})}}}),ha=["id"],pa=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function je(t,a){if(t==null)return{};var s,r,i=ga(t,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)s=n[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(i[s]=t[s])}return i}function ga(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}function se(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,r)}return s}function k(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?se(Object(s),!0).forEach(function(r){fa(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):se(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function fa(t,a,s){return(a=va(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function va(t){var a=ya(t,"string");return typeof a=="symbol"?a:a+""}function ya(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function I(){return I=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},I.apply(null,arguments)}function W(t,a){return t&&t!=="none"?t:a}var ja=t=>{var{dataKey:a,name:s,stroke:r,fill:i,legendType:n,hide:m}=t;return[{inactive:m,dataKey:a,type:n,color:W(r,i),value:me(s,a),payload:t}]};function ba(t){var{dataKey:a,data:s,stroke:r,strokeWidth:i,fill:n,name:m,hide:d,unit:l}=t;return{dataDefinedOnItem:s,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:n,dataKey:a,nameKey:void 0,name:me(m,a),hide:d,type:t.tooltipType,color:W(r,n),unit:l}}}var Na=(t,a)=>{var s;if(c.isValidElement(t))s=c.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r=ie("recharts-area-dot",typeof t!="boolean"?t.className:"");s=c.createElement(Qe,I({},a,{className:r}))}return s};function Aa(t,a){return t==null?!1:a?!0:t.length===1}function wa(t){var{clipPathId:a,points:s,props:r}=t,{needClip:i,dot:n,dataKey:m}=r;if(!Aa(s,n))return null;var d=xe(n),l=he(r),u=ue(n,!0),v=s.map((p,x)=>{var o=k(k(k({key:"dot-".concat(x),r:3},l),u),{},{index:x,cx:p.x,cy:p.y,dataKey:m,value:p.value,payload:p.payload,points:s});return Na(n,o)}),y={clipPath:i?"url(#clipPath-".concat(d?"":"dots-").concat(a,")"):void 0};return c.createElement(B,I({className:"recharts-area-dots"},y),v)}function Pa(t){var{showLabels:a,children:s,points:r}=t,i=r.map(n=>{var m={x:n.x,y:n.y,width:0,height:0};return k(k({},m),{},{value:n.value,payload:n.payload,parentViewBox:void 0,viewBox:m,fill:void 0})});return c.createElement(Je,{value:a?i:null},s)}function re(t){var{points:a,baseLine:s,needClip:r,clipPathId:i,props:n}=t,{layout:m,type:d,stroke:l,connectNulls:u,isRange:v}=n,{id:y}=n,p=je(n,ha),x=he(p);return c.createElement(c.Fragment,null,(a==null?void 0:a.length)>1&&c.createElement(B,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},c.createElement(F,I({},x,{id:y,points:a,connectNulls:u,type:d,baseLine:s,layout:m,stroke:"none",className:"recharts-area-area"})),l!=="none"&&c.createElement(F,I({},x,{className:"recharts-area-curve",layout:m,type:d,connectNulls:u,fill:"none",points:a})),l!=="none"&&v&&c.createElement(F,I({},x,{className:"recharts-area-curve",layout:m,type:d,connectNulls:u,fill:"none",points:s}))),c.createElement(wa,{points:a,props:p,clipPathId:i}))}function ka(t){var{alpha:a,baseLine:s,points:r,strokeWidth:i}=t,n=r[0].y,m=r[r.length-1].y;if(!K(n)||!K(m))return null;var d=a*Math.abs(n-m),l=Math.max(...r.map(u=>u.x||0));return R(s)?l=Math.max(s,l):s&&Array.isArray(s)&&s.length&&(l=Math.max(...s.map(u=>u.x||0),l)),R(l)?c.createElement("rect",{x:0,y:n<m?n:n-d,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(d)}):null}function Ia(t){var{alpha:a,baseLine:s,points:r,strokeWidth:i}=t,n=r[0].x,m=r[r.length-1].x;if(!K(n)||!K(m))return null;var d=a*Math.abs(n-m),l=Math.max(...r.map(u=>u.y||0));return R(s)?l=Math.max(s,l):s&&Array.isArray(s)&&s.length&&(l=Math.max(...s.map(u=>u.y||0),l)),R(l)?c.createElement("rect",{x:n<m?n:n-d,y:0,width:d,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}function Ca(t){var{alpha:a,layout:s,points:r,baseLine:i,strokeWidth:n}=t;return s==="vertical"?c.createElement(ka,{alpha:a,points:r,baseLine:i,strokeWidth:n}):c.createElement(Ia,{alpha:a,points:r,baseLine:i,strokeWidth:n})}function Ea(t){var{needClip:a,clipPathId:s,props:r,previousPointsRef:i,previousBaselineRef:n}=t,{points:m,baseLine:d,isAnimationActive:l,animationBegin:u,animationDuration:v,animationEasing:y,onAnimationStart:p,onAnimationEnd:x}=r,o=$e(r,"recharts-area-"),[h,j]=c.useState(!1),P=!h,A=c.useCallback(()=>{typeof x=="function"&&x(),j(!1)},[x]),w=c.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]),g=i.current,b=n.current;return c.createElement(Pa,{showLabels:P,points:m},r.children,c.createElement(Xe,{animationId:o,begin:u,duration:v,isActive:l,easing:y,onAnimationEnd:A,onAnimationStart:w,key:o},f=>{if(g){var E=g.length/m.length,M=f===1?m:m.map((N,O)=>{var S=Math.floor(O*E);if(g[S]){var L=g[S];return k(k({},N),{},{x:D(L.x,N.x,f),y:D(L.y,N.y,f)})}return N}),C;return R(d)?C=D(b,d,f):Ye(d)||He(d)?C=D(b,0,f):C=d.map((N,O)=>{var S=Math.floor(O*E);if(Array.isArray(b)&&b[S]){var L=b[S];return k(k({},N),{},{x:D(L.x,N.x,f),y:D(L.y,N.y,f)})}return N}),f>0&&(i.current=M,n.current=C),c.createElement(re,{points:M,baseLine:C,needClip:a,clipPathId:s,props:r})}return f>0&&(i.current=m,n.current=d),c.createElement(B,null,l&&c.createElement("defs",null,c.createElement("clipPath",{id:"animationClipPath-".concat(s)},c.createElement(Ca,{alpha:f,points:m,baseLine:d,layout:r.layout,strokeWidth:r.strokeWidth}))),c.createElement(B,{clipPath:"url(#animationClipPath-".concat(s,")")},c.createElement(re,{points:m,baseLine:d,needClip:a,clipPathId:s,props:r})))}),c.createElement(Ue,{label:r.label}))}function Sa(t){var{needClip:a,clipPathId:s,props:r}=t,i=c.useRef(null),n=c.useRef();return c.createElement(Ea,{needClip:a,clipPathId:s,props:r,previousPointsRef:i,previousBaselineRef:n})}class La extends c.PureComponent{render(){var a,{hide:s,dot:r,points:i,className:n,top:m,left:d,needClip:l,xAxisId:u,yAxisId:v,width:y,height:p,id:x,baseLine:o}=this.props;if(s)return null;var h=ie("recharts-area",n),j=x,{r:P=3,strokeWidth:A=2}=(a=ue(r,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},w=xe(r),g=P*2+A;return c.createElement(c.Fragment,null,c.createElement(B,{className:h},l&&c.createElement("defs",null,c.createElement(Ge,{clipPathId:j,xAxisId:u,yAxisId:v}),!w&&c.createElement("clipPath",{id:"clipPath-dots-".concat(j)},c.createElement("rect",{x:d-g/2,y:m-g/2,width:y+g,height:p+g}))),c.createElement(Sa,{needClip:l,clipPathId:j,props:this.props})),c.createElement(U,{points:i,mainColor:W(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(o)&&c.createElement(U,{points:o,mainColor:W(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var be={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Ke.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Da(t){var a,s=ce(t,be),{activeDot:r,animationBegin:i,animationDuration:n,animationEasing:m,connectNulls:d,dot:l,fill:u,fillOpacity:v,hide:y,isAnimationActive:p,legendType:x,stroke:o,xAxisId:h,yAxisId:j}=s,P=je(s,pa),A=We(),w=_e(),{needClip:g}=Fe(h,j),b=de(),{points:f,isRange:E,baseLine:M}=(a=ze(Ae=>xa(Ae,h,j,b,t.id)))!==null&&a!==void 0?a:{},C=Ve();if(A!=="horizontal"&&A!=="vertical"||C==null||w!=="AreaChart"&&w!=="ComposedChart")return null;var{height:N,width:O,x:S,y:L}=C;return!f||!f.length?null:c.createElement(La,I({},P,{activeDot:r,animationBegin:i,animationDuration:n,animationEasing:m,baseLine:M,connectNulls:d,dot:l,fill:u,fillOpacity:v,height:N,hide:y,layout:A,isAnimationActive:p,isRange:E,legendType:x,needClip:g,points:f,stroke:o,width:O,left:S,top:L,xAxisId:h,yAxisId:j}))}var Ra=(t,a,s,r,i)=>{var n=s??a;if(R(n))return n;var m=t==="horizontal"?i:r,d=m.scale.domain();if(m.type==="number"){var l=Math.max(d[0],d[1]),u=Math.min(d[0],d[1]);return n==="dataMin"?u:n==="dataMax"||l<0?l:Math.max(Math.min(d[0],d[1]),0)}return n==="dataMin"?d[0]:n==="dataMax"?d[1]:d[0]};function Oa(t){var{areaSettings:{connectNulls:a,baseValue:s,dataKey:r},stackedData:i,layout:n,chartBaseValue:m,xAxis:d,yAxis:l,displayedData:u,dataStartIndex:v,xAxisTicks:y,yAxisTicks:p,bandSize:x}=t,o=i&&i.length,h=Ra(n,m,s,d,l),j=n==="horizontal",P=!1,A=u.map((g,b)=>{var f;o?f=i[v+b]:(f=J(g,r),Array.isArray(f)?P=!0:f=[h,f]);var E=f[1]==null||o&&!a&&J(g,r)==null;return j?{x:Q({axis:d,ticks:y,bandSize:x,entry:g,index:b}),y:E?null:l.scale(f[1]),value:f,payload:g}:{x:E?null:d.scale(f[1]),y:Q({axis:l,ticks:p,bandSize:x,entry:g,index:b}),value:f,payload:g}}),w;return o||P?w=A.map(g=>{var b=Array.isArray(g.value)?g.value[0]:null;return j?{x:g.x,y:b!=null&&g.y!=null?l.scale(b):null,payload:g.payload}:{x:b!=null?d.scale(b):null,y:g.y,payload:g.payload}}):w=j?l.scale(h):d.scale(h),{points:A,baseLine:w,isRange:P}}function Ba(t){var a=ce(t,be),s=de();return c.createElement(Oe,{id:a.id,type:"area"},r=>c.createElement(c.Fragment,null,c.createElement(Be,{legendPayload:ja(a)}),c.createElement(Me,{fn:ba,args:a}),c.createElement(Te,{type:"area",id:r,data:a.data,dataKey:a.dataKey,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,stackId:qe(a.stackId),hide:a.hide,barSize:void 0,baseValue:a.baseValue,isPanorama:s,connectNulls:a.connectNulls}),c.createElement(Da,I({},a,{id:r}))))}var Ne=c.memo(Ba);Ne.displayName="Area";var Ma=["axis"],Ta=c.forwardRef((t,a)=>c.createElement(Ze,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ma,tooltipPayloadSearcher:ea,categoricalChartProps:t,ref:a}));function qa({className:t=""}){const[a,s]=c.useState("30d"),r=[{date:"2024-01-01",revenue:1200,orders:15,products:8},{date:"2024-01-02",revenue:1800,orders:22,products:12},{date:"2024-01-03",revenue:1500,orders:18,products:10},{date:"2024-01-04",revenue:2200,orders:28,products:15},{date:"2024-01-05",revenue:1900,orders:24,products:13},{date:"2024-01-06",revenue:2500,orders:32,products:18},{date:"2024-01-07",revenue:2100,orders:26,products:14}],i=[{name:"Farinha de Trigo",quantity:5e3,minLevel:1e3,status:"ok"},{name:"AÃ§Ãºcar Refinado",quantity:3e3,minLevel:500,status:"ok"},{name:"Chocolate em PÃ³",quantity:1500,minLevel:200,status:"ok"},{name:"Ovos",quantity:120,minLevel:50,status:"warning"},{name:"Leite",quantity:2e3,minLevel:300,status:"ok"},{name:"Manteiga",quantity:2e3,minLevel:400,status:"ok"},{name:"Creme de Leite",quantity:1500,minLevel:200,status:"ok"},{name:"Leite Condensado",quantity:1e3,minLevel:150,status:"ok"},{name:"Coco Ralado",quantity:800,minLevel:100,status:"ok"},{name:"AmÃªndoas",quantity:1e3,minLevel:200,status:"ok"}],n=[{name:"Bolo de Chocolate",popularity:85,profitMargin:65},{name:"Cupcake de Baunilha",popularity:78,profitMargin:70},{name:"Torta de Morango",popularity:72,profitMargin:60},{name:"Brigadeiro Gourmet",popularity:90,profitMargin:80},{name:"PÃ£o de Mel",popularity:68,profitMargin:55}],m=[{category:"Ingredientes",amount:4500,percentage:60},{category:"MÃ£o de Obra",amount:1800,percentage:24},{category:"Embalagem",amount:600,percentage:8},{category:"Outros",amount:600,percentage:8}],d=["#8B5E3C","#D2B79C","#EAD9C2","#F6F0E6","#68472B"],l=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),u=o=>{const h=o.quantity/(o.minLevel*3)*100;return h<30?{status:"critical",color:"text-red-600",bg:"bg-red-100"}:h<60?{status:"warning",color:"text-yellow-600",bg:"bg-yellow-100"}:{status:"ok",color:"text-green-600",bg:"bg-green-100"}},v=i.filter(o=>o.quantity<=o.minLevel*1.5),y=r.reduce((o,h)=>o+h.revenue,0),p=r.reduce((o,h)=>o+h.orders,0),x=y/p;return e.jsxs("div",{className:`space-y-8 ${t}`,children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analytics da Confeitaria"}),e.jsx("p",{className:"text-gray-600",children:"Insights e mÃ©tricas para tomada de decisÃ£o"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex bg-gray-100 rounded-xl p-1",children:["7d","30d","90d"].map(o=>e.jsx(X,{variant:a===o?"default":"ghost",size:"sm",onClick:()=>s(o),className:"px-4 py-2 text-sm rounded-lg",children:o},o))}),e.jsx(X,{onClick:()=>{},variant:"outline",size:"sm",className:"rounded-xl",children:e.jsx(Pe,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-green-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx(Se,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Receita Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(y)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(T,{className:"w-3 h-3 text-emerald-600"}),e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"+12.5%"})]})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx(aa,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Total de Pedidos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(T,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"+8.2%"})]})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Ticket MÃ©dio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(x)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(T,{className:"w-3 h-3 text-purple-600"}),e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"+5.1%"})]})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-amber-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx(la,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Produtos em Estoque"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ke,{className:"w-3 h-3 text-orange-600"}),e.jsxs("span",{className:"text-xs text-orange-600 font-medium",children:[v.length," baixo estoque"]})]})]})]})})]}),v.length>0&&e.jsx(Ie,{variant:"warning",title:"AtenÃ§Ã£o: Estoque Baixo",children:e.jsx("div",{className:"space-y-1",children:v.map(o=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:o.name}),e.jsxs("span",{className:"font-medium",children:[o.quantity," unidades"]})]},o.name))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-amber-600 rounded-lg flex items-center justify-center text-white text-sm",children:"ðŸ“ˆ"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Receita e Pedidos"})]}),e.jsx(z,{width:"100%",height:300,children:e.jsxs(Ta,{data:r,children:[e.jsx(Z,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"date",tickFormatter:o=>new Date(o).toLocaleDateString("pt-BR")}),e.jsx(q,{yAxisId:"revenue",orientation:"left"}),e.jsx(q,{yAxisId:"orders",orientation:"right"}),e.jsx(V,{formatter:(o,h)=>[h==="revenue"?l(o):o,h==="revenue"?"Receita":"Pedidos"],labelFormatter:o=>new Date(o).toLocaleDateString("pt-BR")}),e.jsx(ae,{}),e.jsx(Ne,{yAxisId:"revenue",type:"monotone",dataKey:"revenue",stroke:"#8B5E3C",fill:"#8B5E3C",fillOpacity:.3,name:"Receita"}),e.jsx(ta,{yAxisId:"orders",type:"monotone",dataKey:"orders",stroke:"#D2B79C",strokeWidth:2,name:"Pedidos"})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center text-white text-sm",children:"ðŸ°"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance das Receitas"})]}),e.jsx(z,{width:"100%",height:300,children:e.jsxs(sa,{data:n,children:[e.jsx(Z,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"name"}),e.jsx(q,{yAxisId:"popularity",orientation:"left"}),e.jsx(q,{yAxisId:"profitMargin",orientation:"right"}),e.jsx(V,{formatter:(o,h)=>[`${o}%`,h==="popularity"?"Popularidade":"Margem de Lucro"]}),e.jsx(ae,{}),e.jsx(te,{yAxisId:"popularity",dataKey:"popularity",fill:"#8B5E3C",name:"Popularidade (%)"}),e.jsx(te,{yAxisId:"profitMargin",dataKey:"profitMargin",fill:"#D2B79C",name:"Margem de Lucro (%)"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"DistribuiÃ§Ã£o de Custos"}),e.jsx(z,{width:"100%",height:300,children:e.jsxs(ra,{children:[e.jsx(ia,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percentage:h})=>`${o} (${h}%)`,outerRadius:80,fill:"#8884d8",dataKey:"amount",children:m.map((o,h)=>e.jsx(na,{fill:d[h%d.length]},`cell-${h}`))}),e.jsx(V,{formatter:o=>l(o)})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status do Estoque"}),e.jsx("div",{className:"space-y-3",children:i.slice(0,6).map(o=>{const h=u(o),j=Math.min(o.quantity/(o.minLevel*3)*100,100);return e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:o.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[o.quantity," unidades"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${h.status==="critical"?"bg-red-500":h.status==="warning"?"bg-yellow-500":"bg-green-500"}`,style:{width:`${j}%`}})})]})},o.name)})})]})]})]})}function za(){const{stock:t,capability:a,history:s,fetchStock:r,fetchCapability:i,fetchHistory:n,loading:m}=ca();c.useEffect(()=>{Promise.all([r(),i(),n()]).catch(()=>Ce.error("Falha ao carregar dashboard"))},[r,i,n]);const d=c.useMemo(()=>{const l=t.length,u=t.reduce((x,o)=>x+o.quantity,0),v=t.filter(x=>x.quantity<100).length,y=a.length,p=a.length>0?a.reduce((x,o)=>x+o.possible,0)/a.length:0;return{totalProducts:l,totalStock:u.toFixed(0),lowStockProducts:v,totalRecipes:y,avgCapability:p.toFixed(1)}},[t,a]);return m?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ee,{size:"lg"}),e.jsx("span",{className:"ml-3 text-lg",children:"Carregando dashboard..."})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"VisÃ£o geral da sua confeitaria"})]}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-xl",children:["Ãšltima atualizaÃ§Ã£o: ",new Date().toLocaleTimeString()]})]}),e.jsx(qa,{}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-green-600 rounded-xl flex items-center justify-center text-white",children:"ðŸ“¦"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.totalProducts}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Produtos"})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white",children:"âš–ï¸"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[d.totalStock,"g"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Estoque Total"})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl flex items-center justify-center text-white",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.lowStockProducts}),e.jsx("div",{className:"text-sm text-gray-600",children:"Estoque Baixo"})]})]})}),e.jsx("div",{className:"card card-hover p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center text-white",children:"ðŸ°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.totalRecipes}),e.jsx("div",{className:"text-sm text-gray-600",children:"Receitas Ativas"})]})]})})]}),e.jsxs("section",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-green-600 rounded-lg flex items-center justify-center text-white text-sm",children:"ðŸ“¦"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estoque Detalhado"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-auto",children:t.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum produto cadastrado"}):t.map(l=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${l.quantity<100?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[l.quantity,"g"]})]},l.id))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center text-white text-sm",children:"ðŸ°"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Capacidade de ProduÃ§Ã£o"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-auto",children:a.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhuma receita cadastrada"}):a.map(l=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${l.possible>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.possible,"x"]})]},l.recipeId))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"HistÃ³rico Recente"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-auto",children:s.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhuma movimentaÃ§Ã£o"}):s.slice(0,10).map(l=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:new Date(l.createdAt).toLocaleString()}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.jsxs("span",{className:"text-red-600",children:["-",l.amount,"g"]})," ",l.product.name]}),e.jsx("div",{className:"text-xs text-gray-600",children:l.reason})]},l.id))})]})]})]})}export{za as default};
