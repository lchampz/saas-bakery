var V=Object.defineProperty;var H=(r,s,a)=>s in r?V(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a;var _=(r,s,a)=>H(r,typeof s!="symbol"?s+"":s,a);import{e as m,r as N,a as p,c as K,j as e,B as f,R as S,A as F,I as E,L as k,t as l}from"./index-DEkxB3eO.js";import{D as G,T as Q}from"./trending-up-vORK59cH.js";import{P as X,Q as Y,T as U,U as L,V as $,X as B,Y as q,W as M,Z as W,_ as Z,$ as J,a0 as ee,a1 as se,a2 as ae,a3 as te}from"./PieChart-Dj48RRMv.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ce=m("chart-column",re);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ie=m("circle-alert",ne);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],R=m("circle-check-big",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],le=m("circle-x",de);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D=m("clock",me);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],he=m("credit-card",xe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ue=m("map-pin",ge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T=m("settings",pe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],z=m("smartphone",ye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fe=m("truck",je);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],be=m("user",Ne);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],we=m("users",ve);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ce=m("wifi-off",ke);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Ee=m("wifi",Ie);var De=["axis"],Se=N.forwardRef((r,s)=>N.createElement(X,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:De,tooltipPayloadSearcher:Y,categoricalChartProps:r,ref:s}));class h{static async configureIntegration(s){try{return(await p.post("/ifood/integration/configure",s)).data}catch(a){throw console.error("Erro ao configurar integração iFood:",a),a}}static async getIntegrationConfig(){try{return(await p.get("/ifood/integration/config")).data}catch(s){throw console.error("Erro ao obter configuração iFood:",s),s}}static async syncCatalog(s){try{return(await p.post("/ifood/catalog/sync",{products:s})).data}catch(a){throw console.error("Erro ao sincronizar catálogo:",a),a}}static async getOrders(s){try{return(await p.get("/ifood/orders",{params:s})).data}catch(a){throw console.error("Erro ao obter pedidos iFood:",a),a}}static async getOrderById(s){try{return(await p.get(`/ifood/orders/${s}`)).data}catch(a){throw console.error("Erro ao obter pedido iFood:",a),a}}static async confirmOrder(s,a){try{return(await p.post(`/ifood/orders/${s}/confirm`,{estimatedTime:a})).data}catch(c){throw console.error("Erro ao confirmar pedido:",c),c}}static async cancelOrder(s,a){try{return(await p.post(`/ifood/orders/${s}/cancel`,{reason:a})).data}catch(c){throw console.error("Erro ao cancelar pedido:",c),c}}static async dispatchOrder(s){try{return(await p.post(`/ifood/orders/${s}/dispatch`)).data}catch(a){throw console.error("Erro ao despachar pedido:",a),a}}static async getSalesSummary(s){try{return(await p.get("/ifood/analytics/sales-summary",{params:s})).data}catch(a){throw console.error("Erro ao obter resumo de vendas:",a),a}}static async getTopProducts(s){try{return(await p.get("/ifood/analytics/top-products",{params:s})).data}catch(a){throw console.error("Erro ao obter produtos mais vendidos:",a),a}}static async testWebhook(){try{return(await p.post("/ifood/webhook/test")).data}catch(s){throw console.error("Erro ao testar webhook:",s),s}}static async getIntegrationStatus(){try{return(await p.get("/ifood/integration/status")).data}catch(s){throw console.error("Erro ao obter status da integração:",s),s}}}_(h,"BASE_URL","https://pos-api.ifood.com.br");const A=K((r,s)=>({integrationConfig:null,isIntegrationActive:!1,integrationStatus:"idle",orders:[],currentOrder:null,ordersLoading:!1,salesSummary:null,topProducts:[],async configureIntegration(a){r({integrationStatus:"loading"});try{await h.configureIntegration(a),r({integrationConfig:a,isIntegrationActive:!0,integrationStatus:"connected"})}catch(c){throw r({integrationStatus:"error"}),c}},async getIntegrationConfig(){r({integrationStatus:"loading"});try{const a=await h.getIntegrationConfig();r({integrationConfig:a,isIntegrationActive:(a==null?void 0:a.isActive)||!1,integrationStatus:"connected"})}catch(a){throw r({integrationStatus:"error"}),a}},async syncCatalog(a){await h.syncCatalog(a)},async getOrders(a){r({ordersLoading:!0});try{const c=await h.getOrders(a);r({orders:c,ordersLoading:!1})}catch(c){throw r({ordersLoading:!1}),c}},async getOrderById(a){const c=await h.getOrderById(a);r({currentOrder:c})},async confirmOrder(a,c){await h.confirmOrder(a,c);const o=s().orders.map(d=>d.id===a?{...d,status:"CONFIRMED"}:d);r({orders:o})},async cancelOrder(a,c){await h.cancelOrder(a,c);const o=s().orders.map(d=>d.id===a?{...d,status:"CANCELLED"}:d);r({orders:o})},async dispatchOrder(a){await h.dispatchOrder(a);const y=s().orders.map(o=>o.id===a?{...o,status:"DISPATCHED"}:o);r({orders:y})},async getSalesSummary(a){const c=await h.getSalesSummary(a);r({salesSummary:c})},async getTopProducts(a){const c=await h.getTopProducts(a);r({topProducts:c})},async testWebhook(){await h.testWebhook()},async getIntegrationStatus(){try{const a=await h.getIntegrationStatus();r({isIntegrationActive:a.isActive,integrationStatus:a.isActive?"connected":"idle"})}catch{throw r({integrationStatus:"error"}),new Error("Erro ao obter status da integração")}}}));function Ae({className:r=""}){const{integrationConfig:s,isIntegrationActive:a,integrationStatus:c,configureIntegration:y,getIntegrationStatus:o,testWebhook:d}=A(),[b,g]=N.useState(!1),[j,w]=N.useState(!1),[u,x]=N.useState({merchantId:(s==null?void 0:s.merchantId)||"",clientId:(s==null?void 0:s.clientId)||"",clientSecret:(s==null?void 0:s.clientSecret)||"",webhookUrl:(s==null?void 0:s.webhookUrl)||""}),n=async()=>{g(!0);try{await y({...u,isActive:!0}),l.success("Integração com iFood configurada com sucesso!")}catch{l.error("Erro ao configurar integração com iFood")}finally{g(!1)}},i=async()=>{w(!0);try{await d(),l.success("Webhook testado com sucesso!")}catch{l.error("Erro ao testar webhook")}finally{w(!1)}},O=async()=>{try{await o(),l.success("Status atualizado!")}catch{l.error("Erro ao atualizar status")}},C=()=>{switch(c){case"connected":return e.jsx(R,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(ie,{className:"w-5 h-5 text-red-500"});case"loading":return e.jsx(k,{size:"sm"});default:return e.jsx(Ce,{className:"w-5 h-5 text-gray-400"})}},P=()=>{switch(c){case"connected":return"Conectado";case"error":return"Erro na conexão";case"loading":return"Conectando...";default:return"Desconectado"}};return e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Integração iFood"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Conecte sua confeitaria com o iFood"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:P()}),e.jsx(f,{variant:"outline",size:"sm",onClick:O,className:"ml-2",children:e.jsx(S,{className:"w-4 h-4"})})]})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{variant:"success",title:"Integração ativa",children:"Sua confeitaria está conectada ao iFood e recebendo pedidos automaticamente."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status"})]}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:"Ativo"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Merchant ID"})]}),e.jsx("p",{className:"text-sm font-mono text-gray-600",children:s==null?void 0:s.merchantId})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Webhook"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s==null?void 0:s.webhookUrl})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"outline",onClick:i,disabled:j,className:"flex-1",children:j?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"sm"}),"Testando..."]}):"Testar Webhook"}),e.jsx(f,{variant:"outline",onClick:()=>x(t=>({...t,isActive:!1})),className:"flex-1",children:"Desconectar"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{variant:"info",title:"Configure a integração",children:"Para receber pedidos do iFood, configure suas credenciais abaixo."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merchant ID"}),e.jsx(E,{value:u.merchantId,onChange:t=>x(v=>({...v,merchantId:t.target.value})),placeholder:"Seu ID de merchant no iFood"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client ID"}),e.jsx(E,{value:u.clientId,onChange:t=>x(v=>({...v,clientId:t.target.value})),placeholder:"Client ID da API"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Secret"}),e.jsx(E,{type:"password",value:u.clientSecret,onChange:t=>x(v=>({...v,clientSecret:t.target.value})),placeholder:"Client Secret da API"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),e.jsx(E,{value:u.webhookUrl,onChange:t=>x(v=>({...v,webhookUrl:t.target.value})),placeholder:"https://seudominio.com/webhook/ifood"})]})]}),e.jsx(f,{onClick:n,disabled:b||!u.merchantId||!u.clientId,className:"w-full",children:b?e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"sm"}),"Configurando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Configurar Integração"]})})]})]})}function Oe({className:r=""}){const{orders:s,ordersLoading:a,getOrders:c,confirmOrder:y,cancelOrder:o,dispatchOrder:d}=A(),[b,g]=N.useState(null);N.useEffect(()=>{j()},[]);const j=async()=>{try{await c({limit:50})}catch{l.error("Erro ao carregar pedidos")}},w=async t=>{g(t);try{await y(t,30),l.success("Pedido confirmado!"),await j()}catch{l.error("Erro ao confirmar pedido")}finally{g(null)}},u=async t=>{g(t);try{await o(t,"Produto indisponível"),l.success("Pedido cancelado"),await j()}catch{l.error("Erro ao cancelar pedido")}finally{g(null)}},x=async t=>{g(t);try{await d(t),l.success("Pedido despachado!"),await j()}catch{l.error("Erro ao despachar pedido")}finally{g(null)}},n=t=>{switch(t){case"PLACED":return e.jsx(D,{className:"w-4 h-4 text-yellow-500"});case"CONFIRMED":return e.jsx(R,{className:"w-4 h-4 text-blue-500"});case"DISPATCHED":return e.jsx(fe,{className:"w-4 h-4 text-purple-500"});case"DELIVERED":return e.jsx(R,{className:"w-4 h-4 text-green-500"});case"CANCELLED":return e.jsx(le,{className:"w-4 h-4 text-red-500"});default:return e.jsx(D,{className:"w-4 h-4 text-gray-500"})}},i=t=>{switch(t){case"PLACED":return"Novo Pedido";case"CONFIRMED":return"Confirmado";case"DISPATCHED":return"Despachado";case"DELIVERED":return"Entregue";case"CANCELLED":return"Cancelado";default:return t}},O=t=>{switch(t){case"PLACED":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"DISPATCHED":return"bg-purple-100 text-purple-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),P=t=>new Date(t).toLocaleString("pt-BR");return a?e.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(k,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando pedidos..."})]})}):s.length===0?e.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido encontrado"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Os pedidos do iFood aparecerão aqui quando chegarem."}),e.jsxs(f,{onClick:j,variant:"outline",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]})}):e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${r}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos do iFood"}),e.jsxs(f,{onClick:j,variant:"outline",size:"sm",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(t=>{var v;return e.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(D,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Pedido #",t.displayId]}),e.jsx("p",{className:"text-sm text-gray-500",children:P(t.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n(t.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(t.status)}`,children:i(t.status)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.customer.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.customer.phoneNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.delivery.address.street,", ",t.delivery.address.number]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.delivery.address.neighborhood})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C(t.total.orderTotal)}),e.jsx("p",{className:"text-xs text-gray-500",children:(v=t.payments[0])==null?void 0:v.method})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Itens do pedido:"}),e.jsx("div",{className:"space-y-1",children:t.items.map(I=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[I.quantity,"x ",I.name]}),e.jsx("span",{className:"text-gray-900 font-medium",children:C(I.totalPrice)})]},I.id))})]}),t.status==="PLACED"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{onClick:()=>w(t.id),disabled:b===t.id,size:"sm",className:"flex-1",children:b===t.id?e.jsx(k,{size:"sm"}):"Confirmar"}),e.jsx(f,{onClick:()=>u(t.id),disabled:b===t.id,variant:"outline",size:"sm",className:"flex-1",children:"Cancelar"})]}),t.status==="CONFIRMED"&&e.jsx(f,{onClick:()=>x(t.id),disabled:b===t.id,size:"sm",className:"w-full",children:b===t.id?e.jsx(k,{size:"sm"}):"Marcar como Despachado"})]},t.id)})})]})}function Pe({className:r=""}){const{salesSummary:s,getSalesSummary:a,getTopProducts:c}=A(),[y,o]=N.useState(!1),[d,b]=N.useState("30d");N.useEffect(()=>{g()},[d]);const g=async()=>{o(!0);try{const n=new Date,i=new Date;switch(d){case"7d":i.setDate(n.getDate()-7);break;case"30d":i.setDate(n.getDate()-30);break;case"90d":i.setDate(n.getDate()-90);break}await Promise.all([a({startDate:i.toISOString(),endDate:n.toISOString(),groupBy:"day"}),c({limit:10})])}catch{l.error("Erro ao carregar analytics")}finally{o(!1)}},j=[{date:"2024-01-01",revenue:1200,orders:15},{date:"2024-01-02",revenue:1800,orders:22},{date:"2024-01-03",revenue:1500,orders:18},{date:"2024-01-04",revenue:2200,orders:28},{date:"2024-01-05",revenue:1900,orders:24},{date:"2024-01-06",revenue:2500,orders:32},{date:"2024-01-07",revenue:2100,orders:26}],w=[{name:"Bolo de Chocolate",quantity:45,revenue:2250},{name:"Cupcake de Baunilha",quantity:38,revenue:1900},{name:"Torta de Morango",quantity:32,revenue:1600},{name:"Brigadeiro Gourmet",quantity:28,revenue:1400},{name:"Pão de Mel",quantity:25,revenue:1250}],u=["#8B5E3C","#D2B79C","#EAD9C2","#F6F0E6","#68472B"],x=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n);return y?e.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(k,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando analytics..."})]})}):e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics do iFood"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["7d","30d","90d"].map(n=>e.jsx(f,{variant:d===n?"default":"ghost",size:"sm",onClick:()=>b(n),className:"px-3 py-1 text-xs",children:n},n))}),e.jsx(f,{onClick:g,variant:"outline",size:"sm",children:e.jsx(S,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Receita Total"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:x((s==null?void 0:s.totalRevenue)||13200)})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Pedidos"}),e.jsx("p",{className:"text-xl font-bold text-blue-800",children:(s==null?void 0:s.totalOrders)||165})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(Q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Ticket Médio"}),e.jsx("p",{className:"text-xl font-bold text-purple-800",children:x((s==null?void 0:s.averageOrderValue)||80)})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Clientes Únicos"}),e.jsx("p",{className:"text-xl font-bold text-orange-800",children:Math.floor(((s==null?void 0:s.totalOrders)||165)*.7)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Receita por Dia"}),e.jsx(L,{width:"100%",height:300,children:e.jsxs(Se,{data:j,children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date",tickFormatter:n=>new Date(n).toLocaleDateString("pt-BR")}),e.jsx(q,{tickFormatter:n=>`R$ ${n}`}),e.jsx(M,{formatter:(n,i)=>[i==="revenue"?x(n):n,i==="revenue"?"Receita":"Pedidos"],labelFormatter:n=>new Date(n).toLocaleDateString("pt-BR")}),e.jsx(W,{}),e.jsx(Z,{type:"monotone",dataKey:"revenue",stroke:"#8B5E3C",strokeWidth:3,name:"Receita"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Produtos Mais Vendidos"}),e.jsx(L,{width:"100%",height:300,children:e.jsxs(J,{data:w,children:[e.jsx($,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"name"}),e.jsx(q,{}),e.jsx(M,{formatter:(n,i)=>[i==="revenue"?x(n):n,i==="revenue"?"Receita":"Quantidade"]}),e.jsx(W,{}),e.jsx(ee,{dataKey:"quantity",fill:"#8B5E3C",name:"Quantidade"})]})})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Distribuição de Vendas por Produto"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(L,{width:"100%",height:300,children:e.jsxs(se,{children:[e.jsx(ae,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:({name:n,percent:i})=>`${n} (${(i*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"revenue",children:w.map((n,i)=>e.jsx(te,{fill:u[i%u.length]},`cell-${i}`))}),e.jsx(M,{formatter:n=>x(n)})]})})})]})]})}function Te(){const{isIntegrationActive:r,integrationStatus:s,getIntegrationStatus:a,getOrders:c,getSalesSummary:y,getTopProducts:o}=A();return N.useEffect(()=>{(async()=>{try{await a(),r&&await Promise.all([c({limit:20}),y({groupBy:"day"}),o({limit:10})])}catch{}})()},[r]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-orange-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Integração iFood"})]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie pedidos, analytics e configurações da sua confeitaria no iFood"})]}),s==="loading"&&e.jsx("div",{className:"mb-6",children:e.jsx(F,{variant:"info",title:"Carregando integração",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:"sm"}),"Verificando status da integração..."]})})}),e.jsx("div",{className:"mb-8",children:e.jsx(Ae,{})}),r?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{className:"w-5 h-5 text-gray-700"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analytics e Relatórios"})]}),e.jsx(Pe,{})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(U,{className:"w-5 h-5 text-gray-700"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pedidos Recentes"})]}),e.jsx(Oe,{})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"p-4 bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Configure a integração"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Para começar a receber pedidos do iFood e visualizar analytics, configure sua integração acima."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-left",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Benefícios da integração:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Recebimento automático de pedidos"}),e.jsx("li",{children:"• Confirmação e gestão de pedidos"}),e.jsx("li",{children:"• Analytics detalhados de vendas"}),e.jsx("li",{children:"• Sincronização de catálogo"}),e.jsx("li",{children:"• Relatórios de performance"})]})]})]})}),e.jsxs("div",{className:"mt-12 bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Como funciona a integração?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full w-12 h-12 mx-auto mb-3 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Configure"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Insira suas credenciais do iFood Developer para conectar sua confeitaria"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full w-12 h-12 mx-auto mb-3 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-bold",children:"2"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Receba"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pedidos chegam automaticamente via webhook e aparecem em tempo real"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-full w-12 h-12 mx-auto mb-3 flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold",children:"3"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Gerencie"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Confirme, despache e acompanhe pedidos com analytics detalhados"})]})]})]})]})})}export{Te as default};
